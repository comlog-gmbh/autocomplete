!function(e){function t(t,i){var n,s,r=this;this.minLength=1,this.delay=300,this.source=[],this.menuClass="dropdown-menu",this.menuStyle=null,this.zIndex=100,this.autoFocus=!1,this.ignoreKeys="|9|16|17|18|19|33|34|35|36|37|39|45|144|145|",this.empty=function(e){e.html('<span class="font-weight-light pl-3 pr-3">No results</span>')},this.renderMenu=function(){var i=e("<div />");return this.menuClass&&i.addClass(this.menuClass),this.menuStyle&&i.attr("style",this.menuStyle),i.css("min-width",t.outerWidth()+"px"),i},this.getZIndex=function(){for(var e=0,i=t;"body"!==i.prop("nodeName").toLowerCase();)"auto"!==i.css("z-index")&&e<i.css("z-index")&&(e=parseInt(i.css("z-index"))),i=i.parent();return e},this.renderSpinner=function(t){t.html(e('<div class="d-flex justify-content-center" />').append(e('<div class="spinner-border spinner-border-sm" role="status" />').append('<span class="sr-only">Loading...</span>')))},this.renderItem=function(t,i){return e('<a href="javascript: void(0)" />').addClass("dropdown-item text-wrap").data("data",i).html(i.label||i.value).appendTo(t)},this.matcher=function(e,t,i){var n=(e.label||e.text||e.value).toUpperCase();if(""===t||n.indexOf(t.toUpperCase())>-1)return i(!0);i(!1)},this.highlight=function(e,i){i||(i=t.val());for(var n=e.contents(),s=0;s<n.length;s++){var o=n.eq(s);if(3===o.get(0).nodeType){for(var a=o.text(),l=a.toLowerCase(),i=i.toLowerCase(),u=0;-1!=(u=l.indexOf(i,u));){var c="<b>"+a.substr(u,i.length)+"</b>";l=(a=a.substr(0,u)+c+a.substr(u+i.length)).toLowerCase(),u+=c.length}o.replaceWith(a)}else r.highlight(o)}},this.destroy=function(){n.remove(),t.removeData("autocomplete");for(var e in this)delete this[e]},this.active=function(e){var i=n.children(":visible");if(null===e||void 0===e)return i.filter(".active").index();if(i.filter(".active").removeClass("active"),!1===e)return t;if(!0===e)return this.active(0);var s=null;return e>=i.length?s=i.eq(i.length-1).addClass("active"):e<0?s=i.eq(0).addClass("active"):e>=0&&(s=i.eq(e).addClass("active")),this.focus({},s.data("data"),s),t},this.cursorDown=function(){var e=n.children(":visible").filter(".active").index()||0;return r.active(e+1),!1},this.cursorUp=function(){var e=n.children(":visible").filter(".active").index()||0;r.active(e-1)},this.select=function(e,i,s){t.trigger("autocomplete.preselect",[i,s]),t.val(i.value||i.label||i.text),t.trigger("autocomplete.select",[i,s,n])},this.focus=function(e,i,s){t.val(i.value||i.label||i.text),t.trigger("autocomplete.focus",[i,s,n])},this.toggle=function(){return n.is(".show")?this.hide():this.show(),null},this.show=function(){var i=t.offset(),s=this.getZIndex()+1;s<this.zIndex&&(s=this.zIndex);var r=e(window).innerWidth()-i.left;return n.appendTo(document.body).css("z-index",s).css("top",i.top+t.outerHeight()+"px").css("left",i.left+"px").css("maxWidth",r+"px").addClass("show"),null},this.hide=function(){return n.removeClass("show"),null};var o=function(i,s){var o=r.renderItem(n,i);o instanceof jQuery||(o=e(o)),o.click(function(e){t.trigger("autocomplete.item.click",[i,o,n]),r.select(e,i,o)}),r.highlight&&e.isFunction(r.highlight)&&""!==s&&r.highlight(o,s)},a=function(t,i,s){if(n.html(""),!t||t.length<1)return e.isFunction(r.empty)&&r.empty(n),void(e.isFunction(s)&&s());if(!e.isArray(t))throw"Autocomplete data is not Array";var a=function(n,s){if(n<t.length){var l=t[n];return"string"!=typeof l&&"number"!=typeof l||(l={label:l}),!l.label&&l.text&&(l.label=l.text),!l.label&&l.value&&(l.label=l.value),void(e.isFunction(r.matcher)?r.matcher(l,i,function(e){e&&o(l,i),a(n+1,s)}):(o(l,i),a(n+1,s)))}s()};a(0,function(){r.autoFocus&&r.active(0),e.isFunction(s)&&s()})};if(this.search=function(i,s){if(e.isArray(this.source)||this.source instanceof Array)a(this.source,i,s);else if(e.isFunction(this.source)){r={term:i};this.renderSpinner&&this.renderSpinner(n),this.source(r,function(e){a(e,i,s)})}else if("string"==typeof this.source){var r={term:i};this.renderSpinner&&this.renderSpinner(n),e.ajax({url:this.source,data:{term:term},dataType:"json",success:function(e){a(e,i,s)},error:function(e){throw a([],i,s),e}}),this.source(r,function(e){})}return t},this.option=function(e,t){return void 0===e?this:void 0===t?this[e]:(this[e]=t,null)},this.instance=function(){return this},e.isPlainObject(i))for(var l in i)this[l]=i[l];n=this.renderMenu(),t.blur(function(){setTimeout(function(){r.hide()},500)}),t.keydown(function(e){if(!(r.ignoreKeys.indexOf("|"+e.keyCode+"|")>-1)){if(40===e.keyCode&&n.is(":visible"))return r.cursorDown(),!1;if(38===e.keyCode&&n.is(":visible"))return r.cursorUp(),!1;if(13===e.keyCode&&n.is(":visible")){var i=r.active();if(i>=0){var o=n.children(":visible").eq(i);r.select(e,o.data("data"),o)}return r.hide(),!1}s&&clearTimeout(s),s=setTimeout(function(){t.val().length>=r.minLength?(r.show(),r.search(t.val())):r.hide()},r.delay)}})}e.fn.autocomplete=function(i,n,s){for(var r=0;r<this.length;r++){var o=this.eq(r),a=null;if(e.isPlainObject(i)?(o.data("autocomplete")&&o.data("autocomplete").destroy(),o.data("autocomplete",new t(o,i))):"string"==typeof i&&(a=o.data("autocomplete")[i](n,s)),null!==a)return a}return this}}(jQuery);
//# sourceMappingURL=autocomplete.js.map